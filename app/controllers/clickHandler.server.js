'use strict';var Locations=require('../models/locations.js');function ClickHandler(){this.checkAttendees=function(a,b,c){Locations.findOne({location:a},{_id:0,__v:0}).exec(function(a,b){if(a)throw a;c.json(b)})},this.attend=function(a,b,c){Locations.findOneAndUpdate({location:a},{$addToSet:{attendees:b}},{upsert:!0,new:!0}).exec(function(a,b){if(a)throw a;c.json({location:b.location,total:b.attendees.length,action:'attending'})})},this.unAttend=function(a,b,c){Locations.findOneAndUpdate({location:a},{$pull:{attendees:b}},{new:!0}).exec(function(a,b){if(a)throw a;b.attendees.length||b.remove(),c.json({location:b.location,total:b.attendees.length,action:'not attending'})})}}module.exports=ClickHandler;